(this["webpackJsonpreact-movie-search"]=this["webpackJsonpreact-movie-search"]||[]).push([[0],{32:function(e,t,a){e.exports=a(46)},41:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),o=a(3),i=a(13),s=a(29),u=a(19),m=a(22);var d=Object(i.c)({general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:"",isLoading:!1,searchResult:[],totalPages:0,pageNumber:0,error:"",movieDetails:{},popularMovies:[],topRatedMovies:[],nowPlayingMovies:[],videoKey:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GENERAL_VALUE":return Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.key,t.value));default:return e}}}),v=Object(i.d)(d,Object(i.a)(s.a)),p=(a(41),a(7)),E=a(6),g=a(12),f=a(5),b=a(31),h="ce9638d1205f6f1d7267e2c103b8ae8f",N="https://api.themoviedb.org/3",y="https://image.tmdb.org/t/p/original",_=function(e,t){return{type:"SET_GENERAL_VALUE",key:e,value:t}},k=function(e){return{type:"SET_GENERAL_VALUE",key:"isLoading",value:e}},j=function(e){return{type:"SET_GENERAL_VALUE",key:"error",value:e}},w=function(e,t){var a="".concat(N,"/search/movie?api_key=").concat(h,"&query=").concat(e,"&page=").concat(t||1);return function(e){t||e(_("pageNumber",0)),e(k(!0)),fetch(a).then((function(e){return e.json()})).then((function(t){var a;t.success||e(j(t.status_message)),0===(null===t||void 0===t||null===(a=t.results)||void 0===a?void 0:a.length)&&e(j("Nothing found, please try again")),Object(o.b)((function(){e(k(!1)),e({type:"SET_GENERAL_VALUE",key:"searchResult",value:t.results}),e(function(e){return{type:"SET_GENERAL_VALUE",key:"totalPages",value:e}}(t.total_pages))}))}))}},L=function(){var e=Object(o.d)(),t=Object(E.f)(),a=Object(o.e)((function(e){return e.general}),o.c).query;return r.a.createElement("header",null,r.a.createElement(p.b,{to:"/",className:"logo"},r.a.createElement(g.a,{icon:f.h}),r.a.createElement("h1",null,"React Movie Search")),r.a.createElement("form",{className:"form",onSubmit:function(n){n.preventDefault(),e(w(a)),t.push("/results")}},r.a.createElement("input",{type:"text",name:"query",className:"input",value:a,onChange:function(t){return e({type:"SET_GENERAL_VALUE",key:"query",value:t.target.value})},placeholder:"Enter movie name"}),r.a.createElement("button",{type:"submit",className:"button",disabled:!a.length},"Search")))},O=function(e){var t=e.backdrop;return r.a.createElement("div",{className:"no-photo ".concat(t&&"backdrop")},r.a.createElement(g.a,{icon:f.e}),r.a.createElement("p",null,"No photo"))};O.defaultProps={backdrop:!1};var P=O,C=function(e){var t=e.label,a=e.text,n=e.icon;return r.a.createElement("div",{className:"info-container"},n&&r.a.createElement("div",{className:"info-icon"},r.a.createElement(g.a,{icon:n})),r.a.createElement("p",{className:"info-text"},r.a.createElement("span",null,t," "),a))};C.defaultProps={text:"",icon:{}};var R=C,A=function(){return r.a.createElement("div",{className:"loader"})},x=function(e){var t=e.rating,a=t/10*200,n="#870000";a>=100&&a<=200?n="#00e676":a>=50&&a<=100&&(n="#c8b900");var l={backgroundColor:n,width:a};return 0!==t?r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{label:"Rating:",icon:f.n}),r.a.createElement("div",{className:"rating-container"},r.a.createElement("div",{className:"rating"},r.a.createElement("div",{style:l,className:"rating-fill"})),r.a.createElement("p",null,t))):r.a.createElement(R,{label:"No rating",icon:f.k})};x.defaultProps={rating:0};var S=x,M=function(){var e,t,a,l,c=Object(E.g)().movieId,i=Object(o.e)((function(e){return e.general}),o.c),s=i.movieDetails,u=i.error,m=i.isLoading,d=i.videoKey,v=Object(o.d)();Object(n.useEffect)((function(){Object(o.b)((function(){v(function(e){var t="".concat(N,"/movie/").concat(e,"?api_key=").concat(h);return function(e){e(k(!0)),fetch(t).then((function(e){return e.json()})).then((function(t){t.success||e(j(t.status_message)),Object(o.b)((function(){e(k(!1)),e(_("movieDetails",t))}))}))}}(c)),v(function(e){var t="".concat(N,"/movie/").concat(e,"/videos?api_key=").concat(h);return function(e){fetch(t).then((function(e){return e.json()})).then((function(t){var a;t.success||e(j(t.status_message)),e(_("videoKey",null===(a=t.results[0])||void 0===a?void 0:a.key))}))}}(c))}))}),[v,c]);var g=function(){var e;return String(null===s||void 0===s||null===(e=s.genres)||void 0===e?void 0:e.map((function(e){return e.name})))};return m?r.a.createElement(A,null):u?r.a.createElement("p",{className:"error"},u):r.a.createElement("div",{className:"details-container"},r.a.createElement(p.b,{to:"/results",className:"back-link"}),r.a.createElement("div",{className:"backdrop-poster"},(null===s||void 0===s?void 0:s.backdrop_path)||(null===s||void 0===s?void 0:s.poster_path)?r.a.createElement("img",{className:"backdrop-image",src:"".concat(y).concat((null===s||void 0===s?void 0:s.backdrop_path)||(null===s||void 0===s?void 0:s.poster_path)),alt:s.id}):r.a.createElement(P,{backdrop:!0}),r.a.createElement("h1",{className:"backdrop-title"},null===s||void 0===s?void 0:s.title)),r.a.createElement("div",{className:"details-info"},(null===s||void 0===s?void 0:s.homepage)&&r.a.createElement(R,{label:r.a.createElement("a",{href:"".concat(null===s||void 0===s?void 0:s.homepage),className:"link-light",target:"_blank",rel:"noreferrer noopener"},"Homepage"),icon:f.l}),r.a.createElement(R,{label:"Release date:",text:null===s||void 0===s?void 0:s.release_date,icon:f.d}),(null===s||void 0===s||null===(e=s.production_countries)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.name)&&r.a.createElement(R,{label:(null===s||void 0===s||null===(a=s.production_countries)||void 0===a?void 0:a.length)>1?"Countries:":"Country:",text:function(){var e;return String(null===s||void 0===s||null===(e=s.production_countries)||void 0===e?void 0:e.map((function(e){return e.name})))}(),icon:f.j}),g().length>0&&r.a.createElement(R,{label:(null===s||void 0===s||null===(l=s.genres)||void 0===l?void 0:l.length)>1?"Genres:":"Genre:",text:g(),icon:f.g}),0!==(null===s||void 0===s?void 0:s.budget)&&r.a.createElement(R,{label:"Budget:",text:null===s||void 0===s?void 0:s.budget,icon:f.f}),r.a.createElement(S,{rating:null===s||void 0===s?void 0:s.vote_average}),r.a.createElement(R,{label:(null===s||void 0===s?void 0:s.overview)?"Description:":"No description",icon:f.c}),r.a.createElement("p",{className:"info-text"},null===s||void 0===s?void 0:s.overview)),d&&r.a.createElement("div",{className:"youtube-video"},r.a.createElement("iframe",{title:"youtube-video",src:"https://www.youtube.com/embed/".concat(d),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(null===s||void 0===s?void 0:s.imdb_id)&&r.a.createElement("a",{href:"https://www.imdb.com/title/".concat(null===s||void 0===s?void 0:s.imdb_id),className:"imdb-link",target:"_blank",rel:"noreferrer noopener"},"Movie page on IMDb"))},T=a(49),D=a(48),G=function(e){var t=e.title,a=e.poster,n=e.id;return r.a.createElement(p.b,{to:"/details/".concat(n),className:"movie-card"},r.a.createElement("h1",null,t),r.a.createElement("img",{src:"".concat(y).concat(a),alt:a}))},I=function(e){var t=e.title,a=e.icon;return r.a.createElement("div",{className:"main-section-title"},a&&r.a.createElement(g.a,{icon:a}),r.a.createElement("h1",null,t))},q=function(e){var t=e.sectionTitle,a=e.sectionIcon,n=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:t,icon:a}),r.a.createElement("div",{className:"section-container"},r.a.createElement(T.a,{slidesPerColumnFill:"row",slidesPerColumn:4,spaceBetween:5,breakpoints:{768:{slidesPerColumn:4}}},n.map((function(e){var t=e.id,a=e.original_title,n=e.poster_path;return r.a.createElement(D.a,{key:t},r.a.createElement(G,{title:a,poster:n,id:t}))})))))},U=function(){var e=Object(o.d)();Object(n.useEffect)((function(){e((function(e){e(k(!0)),Promise.all([new Promise((function(e){var t="".concat(N,"/movie/now_playing?api_key=").concat(h,"&page=1");fetch(t).then((function(e){return e.json()})).then((function(t){return e(t)}))})),new Promise((function(e){var t="".concat(N,"/movie/popular?api_key=").concat(h,"&page=1");fetch(t).then((function(e){return e.json()})).then((function(t){e(t)}))})),new Promise((function(e){var t="".concat(N,"/movie/top_rated?api_key=").concat(h,"&page=1");fetch(t).then((function(e){return e.json()})).then((function(t){return e(t)}))}))]).then((function(t){var a=Object(b.a)(t,3),n=a[0],r=a[1],l=a[2];n.status_message||r.status_message||l.status_message?(e(k(!1)),e(j("Loading error"))):Object(o.b)((function(){e(k(!1)),e(_("nowPlayingMovies",n.results)),e(_("popularMovies",r.results)),e(_("topRatedMovies",l.results))}))}))}))}),[e]);var t=Object(o.e)((function(e){return e.general}),o.c),a=t.popularMovies,l=t.topRatedMovies,c=t.nowPlayingMovies;return t.isLoading?r.a.createElement(A,null):r.a.createElement("div",null,r.a.createElement(q,{sectionTitle:"Now playing",sectionIcon:f.m,data:c}),r.a.createElement(q,{sectionTitle:"Popular movies",sectionIcon:f.i,data:a}),r.a.createElement(q,{sectionTitle:"Top rated",sectionIcon:f.n,data:l}))},V=a(30),F=a.n(V),B=function(){var e=Object(o.d)(),t=Object(o.e)((function(e){return e.general}),o.c),a=t.totalPages,n=t.query,l=t.pageNumber;return a>1&&r.a.createElement(F.a,{forcePage:l,pageCount:a,previousLabel:r.a.createElement(g.a,{icon:f.a}),nextLabel:r.a.createElement(g.a,{icon:f.b}),containerClassName:"pagination-container",pageLinkClassName:"pagination-page",pageClassName:"pagination-list",breakLinkClassName:"pagination-page",breakClassName:"pagination-list",previousLinkClassName:"pagination-page",previousClassName:"pagination-list",nextLinkClassName:"pagination-page",nextClassName:"pagination-list",disabledClassName:"pagination-disabled",activeLinkClassName:"pagination-active-link",onPageChange:function(t){var a=t.selected;Object(o.b)((function(){e(w(n,a+1)),e(_("pageNumber",a))}))}})},K=function(e){var t=e.id,a=e.title,n=e.releaseDate,l=e.voteAverage,c=e.overview,o="";return o=c.split(".")[0].length>150?"".concat(c.split(".")[0].slice(0,150),"..."):"".concat(c.split(".")[0]).concat((null===c||void 0===c?void 0:c.split(".")[1])&&". ".concat(c.split(".")[1]),"..."),r.a.createElement("div",{className:"search-item-info"},r.a.createElement(p.b,{to:"/details/".concat(t)},r.a.createElement("h1",null,a)),r.a.createElement("div",{className:"result-info"},r.a.createElement(R,{label:"Release date",text:n,icon:f.d}),r.a.createElement(S,{rating:l}),r.a.createElement("p",null,c.length?o:"No description")),r.a.createElement(p.b,{to:"/details/".concat(t),className:"button read-more-btn"},"Read more"))};K.defaultProps={releaseDate:"",voteAverage:0,overview:""};var J=K,H=function(e){var t=e.id,a=e.poster;return r.a.createElement(p.b,{to:"/details/".concat(t),className:"poster-link"},a?r.a.createElement("img",{src:"".concat(y).concat(a),alt:"".concat(y).concat(a),className:"poster-image"}):r.a.createElement(P,null))};H.defaultProps={poster:""};var z=H,Q=function(){var e=Object(o.e)((function(e){return e.general}),o.c),t=e.searchResult,a=e.error,l=e.isLoading,c=e.query,i=Object(E.f)();return Object(n.useEffect)((function(){c||i.push("/")})),l?r.a.createElement(A,null):a?r.a.createElement("p",{className:"error"},a):r.a.createElement(r.a.Fragment,null,null===t||void 0===t?void 0:t.map((function(e){var t=e.id,a=e.title,n=e.poster_path,l=e.backdrop_path,c=e.release_date,o=e.vote_average,i=e.overview;return r.a.createElement("div",{key:t,className:"search-item"},r.a.createElement(z,{id:t,poster:n||l}),r.a.createElement(J,{id:t,title:a,releaseDate:c,voteAverage:o,overview:i}))})),r.a.createElement(B,null))},W=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(Q,null))},X=function(){return r.a.createElement(p.a,null,r.a.createElement(L,null),r.a.createElement("div",{className:"container"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/",exact:!0},r.a.createElement(U,null)),r.a.createElement(E.a,{path:"/results"},r.a.createElement(W,null)),r.a.createElement(E.a,{path:"/details/:movieId"},r.a.createElement(M,null)))))},Y=function(){return r.a.createElement(X,null)};c.a.render(r.a.createElement(o.a,{store:v},r.a.createElement(Y,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.69631cbc.chunk.js.map